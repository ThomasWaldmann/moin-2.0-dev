{% extends "base_contentonly.html" %}
{% block content %}
{% if not rev %}
This item exists, but not this revision.
{% else %}
{% block headline %}
<h1>Item: {{ rev.item.name }} {% if rev.revno != last_rev_no %}(Revision {{ rev.revno }}){% endif %}</h1>
{% endblock %}
Data:
{% if rev.deleted %}
This item exists, but current revision is deleted.
{% else %}
{{ data_rendered }}
{% endif %}
<hr>Meta:
{{ meta_rendered }}
{% endif %}
{% endblock %}
{% block history %}
    {% if log %}
    <hr>History:
        <form action="" method="GET">
        <div id="page-history">
        <input type="hidden" name="action" value="diff">
        <table>
            <tr>
                <th align="right">#</td>
                <th>Date</td>
                <th align="right">Size</td>
                <th align="right"><input type="submit" value="Diff"></th>
                <th>Editor</td>
                <th>MimeType</td>
                <th>Comment</td>
                <th colspan="2">Actions</td>
            </tr>
            {% for entry in log %}
            <tr>
                <td align="right">{{ entry.rev_no }}</td>
                <td>{{ entry.mtime }}</td>
                <td align="right">{{ entry.size }}</td>
                <td>
                    <input type="radio" name="rev1" value="{{ entry.rev_no }}">
                    <input type="radio" name="rev2" value="{{ entry.rev_no }}">
                </td>
                <td>{{ entry.editor }}</td>
                <td>{{ entry.mimetype|e }}</td>
                <td>{{ entry.comment|e }}</td>
                <td>{{ '<a href="?rev=%d">%s</a>' % (entry.rev_no, 'show') }}</td>
                <td>{{ '<a href="?rev=%d&action=get">%s</a>' % (entry.rev_no, 'get') }}</td>
                <td>{{ '<a href="?rev=%d&action=revert">%s</a>' % (entry.rev_no, 'revert') }}</td>
            </tr>
            {% endfor %}
        </table>
        </div>
        </form>
    {% endif %}
{% endblock %}


