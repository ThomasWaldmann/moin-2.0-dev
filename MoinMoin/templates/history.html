{% extends theme("show.html") %}
{% import "utils.html" as utils %}
{% block content %}
    {% if history %}
    <h1>{{ _("History of '%(item_name)s'", item_name=item_name) }}</h1>
    <form action="{{ url_for('frontend.diff', item_name=item_name) }}" method="GET">
        <div id="moin-page-history">
        <table>
            <tr>
                <th>Name</th>
                <th>#</th>
                <th>Date</th>
                <th>Size</th>
                <th><input type="submit" value="Diff" /></th>
                <th>Editor</th>
                <th>MimeType</th>
                <th>Comment</th>
                <th colspan="6">Actions</th>
            </tr>
            {% for rev in history %}
            <tr>
                <td>{{ rev.name|e }}</td>
                <td class="moin-integer">{{ rev.revno }}</td>
                <td>{{ rev.timestamp|datetimeformat }}</td>
                <td class="moin-integer">{{ rev.size }}</td>
                <td>
                    <div class="moin-hist-rev">
                        <input type="radio" name="rev1" value="{{ rev.revno }}" />
                        <input type="radio" name="rev2" value="{{ rev.revno }}" />
                    </div>
                </td>
                <td>{{ utils.editor_info(rev) }}</td>
                <td>{{ rev.mimetype|e }}</td>
                <td>{{ rev.edit_log_comment|e }}</td>
                <td><a href="{{ url_for('frontend.show_item', item_name=rev.item.name, rev=rev.revno)|e }}">{{ _('show') }}</a></td>
                <td><a href="{{ url_for('frontend.show_item_meta', item_name=rev.item.name, rev=rev.revno)|e }}">{{ _('meta') }}</a></td>
                <td><a href="{{ url_for('frontend.get_item', item_name=rev.item.name, rev=rev.revno)|e }}">{{ _('download') }}</a></td>
                <td><a href="{{ url_for('frontend.highlight_item', item_name=rev.item.name, rev=rev.revno)|e }}">{{_('highlight') }}</a></td>
                <td><a href="{{ url_for('frontend.revert_item', item_name=rev.item.name, rev=rev.revno)|e }}">{{ _('revert') }}</a></td>
                <td><a href="{{ url_for('frontend.destroy_item', item_name=rev.item.name, rev=rev.revno)|e }}">{{ _('destroy') }}</a></td>
            </tr>
            {% endfor %}
        </table>
        </div>
        </form>
    {% endif %}
{% endblock %}
